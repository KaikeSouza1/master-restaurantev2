generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AdminUser {
  id       Int     @id @default(autoincrement())
  email    String  @unique @db.VarChar(255)
  password String  @db.VarChar(255)
  nome     String  @db.VarChar(255)
  isAdmin  Boolean @default(true)

  @@map("AdminUser")
}

model cliente_loja_virtual {
  codseq_clv      Int      @id
  nome_clv        String?  @db.VarChar(100)
  email_clv       String?  @db.VarChar(50)
  cpf_clv         String?  @db.VarChar(20)
  telefone1_clv   String?  @db.VarChar(20)
  acesso_clv      String?  @db.VarChar(250)
  tipo_pessoa_clv String?  @db.VarChar(2)
}

model produtos {
  codinterno   Decimal   @id @db.Decimal(16, 0)
  descricao    String?   @db.VarChar(350)
  preco        Decimal?  @default(0) @db.Decimal(14, 5)
  grupo        Int?
  inativo      String?   @default("") @db.VarChar(1)
  grupo_rel    grupo?    @relation("produtos_grupoTogrupo", fields: [grupo], references: [codigo])
  quitens      quitens[]

  @@index([descricao])
  @@index([grupo])
}

model grupo {
  codigo           Int        @id(map: "gr1upcodgrupo")
  nome             String?    @db.VarChar(30)
  seq_loja_virtual Int?
  produtos         produtos[] @relation("produtos_grupoTogrupo")

  @@index([nome])
}

model empresa {
  codigo Int     @id(map: "em1pcodempresa")
  nome   String? @db.VarChar(60)
  endere String? @db.VarChar(40)
  num    Int?    @db.SmallInt
  bairro String? @db.VarChar(30)
  cidade String? @db.VarChar(25)
  estado String? @db.VarChar(2)
  fone   String? @db.VarChar(12)
}

model quiosque {
  codseq                 Int       @id(map: "kc1odseqquiosque")
  tipo                   String?   @db.VarChar(1)
  num_quiosque           Int?
  data_hora_abertura     DateTime? @db.Timestamp(6)
  vda_finalizada         String?   @db.VarChar(1)
  obs                    String?   @db.VarChar(149)
  nome_cli_esp           String?   @db.VarChar(29)
  fone_esp               String?   @db.VarChar(19)
  cod_endereco           Int?
  val_taxa_entrega       Decimal?  @db.Decimal(8, 2)
  sub_total_geral        Decimal?  @default(0) @db.Decimal(8, 2)
  total                  Decimal?  @default(0) @db.Decimal(8, 2)
  data_hora_finalizada   DateTime? @db.Timestamp(6)
  ean                    String    @db.VarChar(13)
  loja_virtual           Boolean?
  quitens                quitens[]
  mec_quiosque           mec_quiosque[]
  qcadcheq               qcadcheq[]
  qui_maoobra            qui_maoobra[]
  quites                 quites[]
  qupar                  qupar[]

  @@index([num_quiosque])
  @@index([vda_finalizada])
  @@index([tipo])
}

model quitens {
  codseq      Int       @id(map: "kc1odseqquitens")
  codseq_qu   Int?
  codprod     Decimal?  @db.Decimal(16, 0)
  descricao   String?   @db.VarChar(100)
  qtd         Decimal?  @default(0) @db.Decimal(12, 3)
  unitario    Decimal?  @default(0) @db.Decimal(10, 3)
  total       Decimal?  @default(0) @db.Decimal(8, 2)
  obs         String?   @db.VarChar(1000)
  quiosque    quiosque? @relation(fields: [codseq_qu], references: [codseq], onDelete: Cascade)
  produtos    produtos? @relation(fields: [codprod], references: [codinterno])

  @@index([codseq_qu])
}

model mec_quiosque {
  codseq           Int       @id(map: "kcodseq_mec_qui")
  cod_mecanico     Int?
  cod_seq_quiosque Int?
  quiosque         quiosque? @relation(fields: [cod_seq_quiosque], references: [codseq], onDelete: Cascade, map: "rel1_k_cod_seq_quiosque")
}

model qcadcheq {
  codseq    Int       @id(map: "kc1odseqqcadcheq")
  codseq_qu Int?
  quiosque  quiosque? @relation(fields: [codseq_qu], references: [codseq], onDelete: Cascade, map: "rel3_kcodseq_qu")
}

model qui_maoobra {
  codseq       Int       @id(map: "kcod_seq_qmobra")
  cod_quiosque Int?
  quiosque     quiosque? @relation(fields: [cod_quiosque], references: [codseq], onDelete: Cascade, map: "rel2_k_cod_quiosque")
}

model quites {
  codseq     Int       @id(map: "kc1odseqquites")
  codseq_qui Int?
  quiosque   quiosque? @relation(fields: [codseq_qui], references: [codseq], onDelete: Cascade, map: "rel1_kcod_seqqui")
}

model qupar {
  codseq    Int       @id(map: "kc1odseqqupar")
  codseq_qu Int?
  quiosque  quiosque? @relation(fields: [codseq_qu], references: [codseq], onDelete: Cascade, map: "rel1_kcodqui")
}

model caixa {
  codseq           Int       @id
  datai            DateTime? @db.Date
  historico        String?   @db.VarChar(255)
  debito           Decimal?  @default(0) @db.Decimal(12, 2)
  credito          Decimal?  @default(0) @db.Decimal(12, 2)
  acumular         String    @db.VarChar(1)
  tipo             String?   @db.VarChar(50)
  num_caixa        Int?      @default(0)
  cod_forma_pagto  Int?
  codven           Int?      @default(0)
  spc              String?   @db.VarChar(1)
  obs              String?   @db.VarChar(300)
  cod_autorizacao  Int?
  num_nf           Int?
  val_juros        Decimal?  @db.Decimal(8, 2)
  sequencia        Int?
  num_seq_ecf      Int?      @default(0)
  coddd            Int?      @default(0)
  hora_inclusao    DateTime? @db.Time
  ocultar_lacto    Int?      @default(0)
  data_i           DateTime? @db.Date
  hora_i           DateTime? @db.Time
  codcartao        Int?
  id_pagar_cai     Int?
  id_nf_servico    Int?
  id_user_gpw      Int?
  id_empresa       Int?
  caixa_aberto     Boolean?

  @@index([cod_forma_pagto])
  @@index([num_seq_ecf])
  @@index([datai])
  @@index([historico])
  @@index([num_caixa])
  @@index([num_nf])
  @@index([coddd])
}